# 磁盘管理工具脚本集

## 概述

这是一套用于 macOS 系统的磁盘管理工具脚本，主要用于管理外部磁盘与应用数据目录之间的文件转移和挂载操作。脚本支持 OBS Studio 和微信等应用的数据管理，但可以根据需要自定义配置。

## 文件说明

1. 挂载磁盘转移数据.sh - 挂载磁盘并将数据从应用目录转移到磁盘
2. 打开磁盘.sh - 打开磁盘目录和应用目录的 Finder 窗口
3. 转移数据.sh - 仅转移数据，不执行挂载操作
4. 恢复数据.sh - 将数据从磁盘恢复到应用目录
5. 挂载磁盘.sh - 仅挂载磁盘到指定目录
6. 磁盘管理工具.sh - 集成所有功能的统一脚本，通过命令行选项选择操作

## 配置说明

### 修改 config 变量

在使用这些脚本前，您需要根据实际情况修改 config 变量。这个变量定义了应用名称和对应的数据目录路径：

```bash
typeset -A config
config=(
    obs-studio   /Users/lanan/Library/Application\ Support/obs-studio 
    微信         /Users/lanan/Library/Containers/com.tencent.xinWeChat
)
```

注意：请将 /Users/lanan/ 替换为您自己的用户名，并确保路径正确。

在 macOS 中查找应用程序数据存储位置

macOS 应用程序的数据通常存储在多个特定位置，具体取决于数据类型。以下是查找应用数据的主要方法：

1. 常见应用数据存储位置

用户级数据（最常见）：

· ~/Library/Application Support/ - 应用程序的支持文件和数据
· ~/Library/Preferences/ - 应用程序偏好设置文件（.plist格式）
· ~/Library/Caches/ - 应用程序缓存文件
· ~/Library/Containers/ - 沙盒化应用程序的专用容器（Mac App Store应用）

系统级数据：

· /Library/Application Support/ - 系统级应用程序数据
· /Library/Preferences/ - 系统级偏好设置

应用程序本身：

· /Applications/ - 应用程序主体（.app文件）

2. 查找特定应用数据位置的方法

1. 使用 Finder：
   · 打开 Finder，按下 Cmd+Shift+G
   · 输入 ~/Library/Application Support/ 并查看其中的文件夹
   · 许多应用会在此创建与自己同名的文件夹
2. 使用终端：
   ```bash
   # 查找可能包含应用名的文件夹
   find ~/Library -name "*应用名*" -type d 2>/dev/null
   
   # 查看 Containers 目录中的应用容器
   ls ~/Library/Containers/
   ```
3. 检查应用文档：
   · 许多应用的官方文档会说明数据存储位置
4. 使用系统活动监视器：
   · 打开"活动监视器"，选择应用进程
   · 点击"打开文件和端口"标签页，查看应用访问的文件路径

## 使用说明

### 集成脚本使用方法

磁盘管理工具.sh 是一个集成所有功能的脚本，可以通过命令行选项选择操作：

```bash
# 挂载磁盘并转移数据
./磁盘管理工具.sh --mount

# 打开磁盘目录
./磁盘管理工具.sh --open

# 恢复数据到原始位置
./磁盘管理工具.sh --restore

# 显示帮助信息
./磁盘管理工具.sh --help
```

### 独立脚本使用方法

各个独立脚本可以直接运行：

```bash
# 赋予执行权限
chmod +x 脚本名称.sh

# 运行脚本
./脚本名称.sh
```

## 注意事项

1. 磁盘名称不能重复：确保没有重复名称的磁盘卷，否则脚本会报错
2. 备份重要数据：在执行任何数据转移操作前，请备份重要数据
3. 权限要求：部分操作需要管理员权限，脚本会自动请求
4. 应用关闭：在执行数据操作前，请确保相关应用已完全关闭
5. 路径验证：确保配置的路径存在且可访问

## 自定义配置

要添加或修改管理的应用，只需编辑 config 变量：

```bash
typeset -A config
config=(
    应用名称1    /路径/到/应用数据1
    应用名称2    /路径/到/应用数据2
    # 更多应用...
)
```

确保应用名称与磁盘卷名称匹配，且数据目录路径正确。

## 故障排除

如果遇到问题，请检查：

1. 磁盘是否已正确连接并可见
2. 配置的路径是否存在
3. 是否有足够的权限访问目标目录
4. 相关应用是否已完全关闭

通过合理配置和使用这些脚本，您可以更轻松地管理应用程序数据与外部磁盘之间的文件转移和备份操作。
